{% extends "okofen_data/base.html" %}
{% load tz %}
{% block title %}Tableau de bord — Okofen Observer{% endblock %}

{% block content %}
  <section class="page-intro">
    <h2>Tableau de bord — dernier jour complet</h2>
    <p>
      Fenêtre journalière: du {{ day_start|date:"d/m/Y H:i" }} au {{ day_end|date:"d/m/Y H:i" }}.
    </p>
  </section>

  <section class="card">
    <h3>Chaudière</h3>
    <div class="controls-grid" style="margin-top: .8rem;">
      <div class="dataset-option" style="justify-content: space-between;">
        <div>Durée d'allumage</div>
        <div style="font-weight: 700;">{{ boiler_on_duration }}</div>
      </div>
      <div class="dataset-option" style="justify-content: space-between;">
        <div>Consommation pellets</div>
        <div style="font-weight: 700;">{{ pellet_consumed_kg }} kg</div>
      </div>
    </div>
  </section>

  <section class="card">
    <h3>Chauffage</h3>
    <div class="controls-grid" style="margin-top: .8rem; grid-template-columns: repeat(3, minmax(220px, 1fr));">
      <!-- Ligne 1: Ambiante, Ambiante (nuit), Départ -->
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° ambiante</div>
        <div style="font-weight: 700;">{% if heating_stats.temp_ambiante_moy %}{{ heating_stats.temp_ambiante_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° ambiante (nuit)</div>
        <div style="font-weight: 700;">{% if night_ambiante_moy %}{{ night_ambiante_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° départ</div>
        <div style="font-weight: 700;">{% if heating_stats.temp_depart_moy %}{{ heating_stats.temp_depart_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
      <!-- Ligne 2: Ext, Ext (nuit), Chaudière -->
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° ext</div>
        <div style="font-weight: 700;">{% if heating_stats.temp_ext_moy %}{{ heating_stats.temp_ext_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° ext (nuit)</div>
        <div style="font-weight: 700;">{% if night_ext_moy %}{{ night_ext_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° chaudière</div>
        <div style="font-weight: 700;">{% if heating_stats.temp_chaudiere_moy %}{{ heating_stats.temp_chaudiere_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
    </div>
  </section>

  <section class="card">
    <h3>Eau chaude</h3>
    <div class="controls-grid" style="margin-top: .8rem;">
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° ECS</div>
        <div style="font-weight: 700;">{% if ecs_stats.temp_ecs_chauffe_moy %}{{ ecs_stats.temp_ecs_chauffe_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
      <div class="dataset-option" style="justify-content: space-between;">
        <div>T° ECS global</div>
        <div style="font-weight: 700;">{% if ecs_stats.temp_ecs_global_moy %}{{ ecs_stats.temp_ecs_global_moy|floatformat:1 }} °C{% else %}–{% endif %}</div>
      </div>
    </div>
  </section>
{% endblock %}
